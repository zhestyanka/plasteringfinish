#!/bin/bash

# üîß –§–∏–Ω–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö API –∏ placeholder
echo "üîß –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –≤—Å–µ API –∏ —É–±–∏—Ä–∞–µ–º placeholder —Ç–µ–∫—Å—Ç..."

# 1. –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
echo "üõë –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ..."
pm2 stop plasteringfinish

# 2. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º Git –¥–ª—è merge
echo "‚öôÔ∏è –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º Git..."
git config pull.rebase false

# 3. –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
echo "üíæ –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è..."
git add .
git commit -m "Fix all APIs and remove placeholders"

# 4. –¢—è–Ω–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å merge
echo "‚¨áÔ∏è –¢—è–Ω–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å merge..."
git pull origin main --no-rebase

# 5. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
echo "üì¶ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏..."
npm install --legacy-peer-deps --force

# 6. –°–æ–±–∏—Ä–∞–µ–º –ø—Ä–æ–µ–∫—Ç
echo "üî® –°–æ–±–∏—Ä–∞–µ–º –ø—Ä–æ–µ–∫—Ç..."
npm run build

# 7. –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
echo "üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ..."
pm2 start ecosystem.config.js
pm2 save

# 8. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
echo "‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å..."
pm2 status

echo ""
echo "üéâ –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã!"
echo ""
echo "üìã –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:"
echo "‚úÖ –ò–∑–º–µ–Ω–µ–Ω–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–∫–ª–∞–¥–∫–∏: '–ú–µ—Ö–∞–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —à—Ç—É–∫–∞—Ç—É—Ä–∫–∞ | –®—Ç—É–∫–∞—Ç—É—Ä –°–ü–±'"
echo "‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ API –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö:"
echo "   - /api/data/reviews - –û—Ç–∑—ã–≤—ã"
echo "   - /api/data/team - –ö–æ–º–∞–Ω–¥–∞"
echo "   - /api/data/equipment - –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ"
echo "   - /api/data/services - –£—Å–ª—É–≥–∏"
echo "   - /api/data/video - –í–∏–¥–µ–æ"
echo ""
echo "‚úÖ –£–±—Ä–∞–Ω—ã –≤—Å–µ placeholder —Ç–µ–∫—Å—Ç—ã –∏–∑ –ø–æ–ª–µ–π –≤–≤–æ–¥–∞:"
echo "   - –û—Ç–∑—ã–≤—ã: —É–±—Ä–∞–Ω—ã placeholder –∏–∑ –≤—Å–µ—Ö –ø–æ–ª–µ–π"
echo "   - –ö–æ–º–∞–Ω–¥–∞: —É–±—Ä–∞–Ω—ã placeholder –∏–∑ –≤—Å–µ—Ö –ø–æ–ª–µ–π"
echo "   - –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ: —É–±—Ä–∞–Ω—ã placeholder –∏–∑ –≤—Å–µ—Ö –ø–æ–ª–µ–π"
echo "   - –£—Å–ª—É–≥–∏: —É–±—Ä–∞–Ω—ã placeholder –∏–∑ –≤—Å–µ—Ö –ø–æ–ª–µ–π"
echo ""
echo "‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–∞–≤–¥–æ–ø–æ–¥–æ–±–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –≤–æ –≤—Å–µ —Ä–∞–∑–¥–µ–ª—ã:"
echo "   - 6 –æ—Ç–∑—ã–≤–æ–≤ –∫–ª–∏–µ–Ω—Ç–æ–≤"
echo "   - 5 –≤–∏–¥–µ–æ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤"
echo "   - 5 –µ–¥–∏–Ω–∏—Ü –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è"
echo "   - 6 —É—Å–ª—É–≥ –∫–æ–º–ø–∞–Ω–∏–∏"
echo "   - 5 —á–ª–µ–Ω–æ–≤ –∫–æ–º–∞–Ω–¥—ã"
echo ""
echo "üåê –°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:"
echo "http://45.153.188.66:3000"
echo ""
echo "üì± –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å:"
echo "http://45.153.188.66:3000/admin"
echo "–õ–æ–≥–∏–Ω: admin, –ü–∞—Ä–æ–ª—å: admin123"
echo ""
echo "üîß –¢–µ–ø–µ—Ä—å –≤—Å–µ —Ä–∞–∑–¥–µ–ª—ã –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ!"
