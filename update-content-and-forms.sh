#!/bin/bash

# üìù –°–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏ —Ñ–æ—Ä–º
echo "üìù –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç –∏ —Ñ–æ—Ä–º—ã..."

# 1. –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
echo "üõë –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ..."
pm2 stop plasteringfinish

# 2. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º Git –¥–ª—è merge
echo "‚öôÔ∏è –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º Git..."
git config pull.rebase false

# 3. –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
echo "üíæ –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è..."
git add .
git commit -m "Update content with realistic names and fix forms"

# 4. –¢—è–Ω–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å merge
echo "‚¨áÔ∏è –¢—è–Ω–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å merge..."
git pull origin main --no-rebase

# 5. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
echo "üì¶ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏..."
npm install --legacy-peer-deps --force

# 6. –°–æ–±–∏—Ä–∞–µ–º –ø—Ä–æ–µ–∫—Ç
echo "üî® –°–æ–±–∏—Ä–∞–µ–º –ø—Ä–æ–µ–∫—Ç..."
npm run build

# 7. –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
echo "üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ..."
pm2 start ecosystem.config.js
pm2 save

# 8. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
echo "‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å..."
pm2 status

echo ""
echo "üéâ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã!"
echo ""
echo "üìã –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:"
echo "‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ 'test' –Ω–∞ –ø—Ä–∞–≤–¥–æ–ø–æ–¥–æ–±–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è:"
echo "   - –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏: '–®—Ç—É–∫–∞—Ç—É—Ä –°–ü–±'"
echo "   - –ó–∞–≥–æ–ª–æ–≤–æ–∫: '–®—Ç—É–∫–∞—Ç—É—Ä–∫–∞ —Å—Ç–µ–Ω'"
echo "   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: '–°—Ç–æ–∏–º–æ—Å—Ç—å –æ—Ç 350‚ÇΩ'"
echo "   - –ê–¥—Ä–µ—Å: '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥, —É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, –¥. 123'"
echo "‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞—è–≤–æ–∫ –Ω–∞ email: 9110163777@rambler.ru"
echo "‚úÖ Email –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏: –ö–æ–Ω—Ç–∞–∫—Ç—ã"
echo "‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å –Ω—É–ª—è–º–∏ –≤ –Ω–∞—á–∞–ª–µ —Ü–µ–Ω—ã"
echo "‚úÖ –°–æ–∑–¥–∞–Ω API –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º"
echo "‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞—è–≤–æ–∫"
echo ""
echo "üåê –°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:"
echo "http://45.153.188.66:3000"
echo ""
echo "üì± –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å:"
echo "http://45.153.188.66:3000/admin"
echo "–õ–æ–≥–∏–Ω: admin, –ü–∞—Ä–æ–ª—å: admin123"
echo ""
echo "üìß –î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è email –∑–∞—è–≤–æ–∫:"
echo "1. –í–æ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å"
echo "2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤: –ö–æ–Ω—Ç–∞–∫—Ç—ã"
echo "3. –ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ–ª–µ 'Email'"
echo "4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è"
