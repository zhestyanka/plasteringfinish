#!/bin/bash

# üîß –°–∫—Ä–∏–ø—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö –ø—Ä–æ–±–ª–µ–º –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
echo "üîß –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ç–µ—Å—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª..."

# 1. –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
echo "üõë –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ..."
pm2 stop plasteringfinish

# 2. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º Git –¥–ª—è merge
echo "‚öôÔ∏è –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º Git..."
git config pull.rebase false

# 3. –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
echo "üíæ –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è..."
git add .
git commit -m "Fix all issues: add pricing info editing, email settings, and improve logging"

# 4. –¢—è–Ω–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å merge
echo "‚¨áÔ∏è –¢—è–Ω–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å merge..."
git pull origin main --no-rebase

# 5. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
echo "üì¶ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏..."
npm install --legacy-peer-deps --force

# 6. –°–æ–±–∏—Ä–∞–µ–º –ø—Ä–æ–µ–∫—Ç
echo "üî® –°–æ–±–∏—Ä–∞–µ–º –ø—Ä–æ–µ–∫—Ç..."
npm run build

# 7. –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
echo "üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ..."
pm2 start ecosystem.config.js
pm2 save

# 8. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
echo "‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å..."
pm2 status

echo ""
echo "üéâ –í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã!"
echo ""
echo "üìã –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–æ:"
echo "‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–≤–∫–ª–∞–¥–∫–∞ '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–∞—Ä–∏—Ñ–∞—Ö' –≤ —Ä–∞–∑–¥–µ–ª–µ '–¢–∞—Ä–∏—Ñ—ã'"
echo "‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Email' –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏"
echo "‚úÖ –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π"
echo "‚úÖ –£–±—Ä–∞–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —Ñ–∞–π–ª–æ–≤ .env –¥–ª—è email"
echo "‚úÖ –í—Å–µ —Ñ–æ—Ä–º—ã —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º"
echo "‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è email –ø—Ä—è–º–æ –∏–∑ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏"
echo ""
echo "‚úÖ –ù–æ–≤—ã–µ —Ä–∞–∑–¥–µ–ª—ã –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏:"
echo "1. üõ†Ô∏è –£—Å–ª—É–≥–∏ ‚Üí –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Å–ª—É–≥–∞—Ö"
echo "2. üí∞ –¢–∞—Ä–∏—Ñ—ã ‚Üí –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–∞—Ä–∏—Ñ–∞—Ö"
echo "3. ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Email"
echo ""
echo "üß™ –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ:"
echo ""
echo "1. üìß –ù–ê–°–¢–†–û–ô–ö–ê EMAIL:"
echo "   - –ó–∞–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å: http://45.153.188.66:3000/admin"
echo "   - –õ–æ–≥–∏–Ω: admin, –ü–∞—Ä–æ–ª—å: admin123"
echo "   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Email'"
echo "   - –£–∫–∞–∂–∏—Ç–µ –≤–∞—à email –∏ SMTP –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"
echo "   - –ù–∞–∂–º–∏—Ç–µ '–¢–µ—Å—Ç' –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏"
echo "   - –ù–∞–∂–º–∏—Ç–µ '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å'"
echo ""
echo "2. üõ†Ô∏è –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–ï –ò–ù–§–û–†–ú–ê–¶–ò–ò –û–ë –£–°–õ–£–ì–ê–•:"
echo "   - –í –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ '–£—Å–ª—É–≥–∏' ‚Üí '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Å–ª—É–≥–∞—Ö'"
echo "   - –ò–∑–º–µ–Ω–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏, –æ–ø–∏—Å–∞–Ω–∏—è, –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞"
echo "   - –ù–∞–∂–º–∏—Ç–µ '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å'"
echo "   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ —Å–∞–π—Ç–µ"
echo ""
echo "3. üí∞ –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–ï –ò–ù–§–û–†–ú–ê–¶–ò–ò –û –¢–ê–†–ò–§–ê–•:"
echo "   - –í –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ '–¢–∞—Ä–∏—Ñ—ã' ‚Üí '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–∞—Ä–∏—Ñ–∞—Ö'"
echo "   - –ò–∑–º–µ–Ω–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏, –æ–ø–∏—Å–∞–Ω–∏—è, —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã"
echo "   - –ù–∞–∂–º–∏—Ç–µ '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å'"
echo "   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ —Å–∞–π—Ç–µ"
echo ""
echo "4. üìù –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –§–û–†–ú:"
echo "   - –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç: http://45.153.188.66:3000"
echo "   - –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ª—é–±—É—é —Ñ–æ—Ä–º—É:"
echo "     * –ì–ª–∞–≤–Ω–∞—è ‚Üí '–ü–æ–ª—É—á–∏—Ç—å —Ä–∞—Å—á–µ—Ç'"
echo "     * –£—Å–ª—É–≥–∏ ‚Üí '–ó–∞–∫–∞–∑–∞—Ç—å –≤—ã–µ–∑–¥'"
echo "     * –¢–∞—Ä–∏—Ñ—ã ‚Üí '–ü–æ–ª—É—á–∏—Ç—å —Ä–∞—Å—á–µ—Ç'"
echo "     * –ö–æ–Ω—Ç–∞–∫—Ç—ã ‚Üí '–ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é'"
echo "   - –ù–∞–∂–º–∏—Ç–µ '–û—Ç–ø—Ä–∞–≤–∏—Ç—å'"
echo "   - –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ '–ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞'"
echo ""
echo "5. üìä –ü–†–û–í–ï–†–ö–ê –õ–û–ì–û–í:"
echo "   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞ –∫–æ–º–∞–Ω–¥–æ–π: pm2 logs plasteringfinish"
echo "   - –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –≤–∏–¥–∞:"
echo "     üìß –ß–∏—Ç–∞–µ–º email –∏–∑ content.json: –≤–∞—à-email@example.com"
echo "     ‚úÖ Email —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—á–∏—Ç–∞–Ω: –≤–∞—à-email@example.com"
echo "     === –ù–û–í–ê–Ø –ó–ê–Ø–í–ö–ê ===
echo "     –ü–æ–ª—É—á–∞—Ç–µ–ª—å: –≤–∞—à-email@example.com
echo "     –¢–µ–º–∞: –ó–∞—è–≤–∫–∞ –Ω–∞ —Ä–∞—Å—á–µ—Ç: 120 –º¬≤
echo "     üìß –ü–æ–ø—ã—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ email:
echo "     –ö–æ–º—É: –≤–∞—à-email@example.com
echo "     ‚úÖ Email —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω (–¥–µ–º–æ —Ä–µ–∂–∏–º)"
echo ""
echo "üåê –°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:"
echo "http://45.153.188.66:3000"
echo ""
echo "üì± –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å:"
echo "http://45.153.188.66:3000/admin"
echo "–õ–æ–≥–∏–Ω: admin, –ü–∞—Ä–æ–ª—å: admin123"
echo ""
echo "üîß –í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω!"

