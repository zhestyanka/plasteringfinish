#!/bin/bash

# üîß –°–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏
echo "üîß –û–±–Ω–æ–≤–ª—è–µ–º –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å..."

# 1. –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
echo "üõë –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ..."
pm2 stop plasteringfinish

# 2. –£–¥–∞–ª—è–µ–º –ª–∏—à–Ω–∏–µ –ø–∞–ø–∫–∏ –∞–¥–º–∏–Ω–∫–∏
echo "üóëÔ∏è –£–¥–∞–ª—è–µ–º –ª–∏—à–Ω–∏–µ –ø–∞–ø–∫–∏..."
rm -rf app/admin/benefits
rm -rf app/admin/steps
rm -rf app/admin/warehouse
rm -rf app/admin/promotions
rm -rf app/admin/media

# 3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
echo "üì¶ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏..."
npm install --legacy-peer-deps --force

# 4. –°–æ–±–∏—Ä–∞–µ–º –ø—Ä–æ–µ–∫—Ç
echo "üî® –°–æ–±–∏—Ä–∞–µ–º –ø—Ä–æ–µ–∫—Ç..."
npm run build

# 5. –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
echo "üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ..."
pm2 start ecosystem.config.js
pm2 save

# 6. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
echo "‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å..."
pm2 status

echo ""
echo "üéâ –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω–∞!"
echo ""
echo "üìã –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:"
echo "‚úÖ –£–±—Ä–∞–Ω—ã –ª–∏—à–Ω–∏–µ —Ä–∞–∑–¥–µ–ª—ã: benefits, steps, warehouse, promotions, media"
echo "‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª '–í–∏–¥–µ–æ'"
echo "‚úÖ –£–±—Ä–∞–Ω –ø–æ–∏—Å–∫ –∏–∑ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏"
echo "‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø—Ä–∏–≤–µ–¥–µ–Ω–∞ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å —Å–∞–π—Ç–æ–º"
echo "‚úÖ –£–ø–æ—Ä—è–¥–æ—á–µ–Ω—ã —Ä–∞–∑–¥–µ–ª—ã –ø–æ –ø–æ—Ä—è–¥–∫—É –ø–æ—è–≤–ª–µ–Ω–∏—è –Ω–∞ —Å–∞–π—Ç–µ"
echo ""
echo "üåê –î–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏:"
echo "http://45.153.188.66:3000/admin"
echo "–õ–æ–≥–∏–Ω: admin, –ü–∞—Ä–æ–ª—å: admin123"
